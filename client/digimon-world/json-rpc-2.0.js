/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/json-rpc-2.0@1.7.0/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r={},t={},n={};!function(r){var t,n=e&&e.__extends||(t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])},t(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(r,"__esModule",{value:!0}),r.createJSONRPCNotification=r.createJSONRPCRequest=r.createJSONRPCSuccessResponse=r.createJSONRPCErrorResponse=r.JSONRPCErrorCode=r.JSONRPCErrorException=r.isJSONRPCResponses=r.isJSONRPCResponse=r.isJSONRPCRequests=r.isJSONRPCRequest=r.isJSONRPCID=r.JSONRPC=void 0,r.JSONRPC="2.0";r.isJSONRPCID=function(e){return"string"==typeof e||"number"==typeof e||null===e};r.isJSONRPCRequest=function(e){return e.jsonrpc===r.JSONRPC&&void 0!==e.method&&void 0===e.result&&void 0===e.error};r.isJSONRPCRequests=function(e){return Array.isArray(e)&&e.every(r.isJSONRPCRequest)};r.isJSONRPCResponse=function(e){return e.jsonrpc===r.JSONRPC&&void 0!==e.id&&(void 0!==e.result||void 0!==e.error)};r.isJSONRPCResponses=function(e){return Array.isArray(e)&&e.every(r.isJSONRPCResponse)};var o=function(e,r,t){var n={code:e,message:r};return null!=t&&(n.data=t),n},i=function(e){function r(t,n,o){var i=e.call(this,t)||this;return Object.setPrototypeOf(i,r.prototype),i.code=n,i.data=o,i}return n(r,e),r.prototype.toObject=function(){return o(this.code,this.message,this.data)},r}(Error);r.JSONRPCErrorException=i,function(e){e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"}(r.JSONRPCErrorCode||(r.JSONRPCErrorCode={}));r.createJSONRPCErrorResponse=function(e,t,n,i){return{jsonrpc:r.JSONRPC,id:e,error:o(t,n,i)}};r.createJSONRPCSuccessResponse=function(e,t){return{jsonrpc:r.JSONRPC,id:e,result:null!=t?t:null}};r.createJSONRPCRequest=function(e,t,n){return{jsonrpc:r.JSONRPC,id:e,method:t,params:n}};r.createJSONRPCNotification=function(e,t){return{jsonrpc:r.JSONRPC,method:e,params:t}}}(n);var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.DefaultErrorCode=void 0,o.DefaultErrorCode=0;var i=e&&e.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(u,s)}a((n=n.apply(e,r||[])).next())}))},u=e&&e.__generator||function(e,r){var t,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(u=0)),u;)try{if(t=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=r.call(e,u)}catch(e){s=[6,e],n=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSONRPCClient=void 0;var s=n,a=o,c=function(){function e(e,r){this._send=e,this.createID=r,this.idToResolveMap=new Map,this.id=0}return e.prototype._createID=function(){return this.createID?this.createID():++this.id},e.prototype.timeout=function(e,r){var t=this;void 0===r&&(r=function(e){return(0,s.createJSONRPCErrorResponse)(e,a.DefaultErrorCode,"Request timeout")});var n=function(n,o){var i=setTimeout((function(){n.forEach((function(e){var n=t.idToResolveMap.get(e);n&&(t.idToResolveMap.delete(e),n(r(e)))}))}),e);return o().then((function(e){return clearTimeout(i),e}),(function(e){return clearTimeout(i),Promise.reject(e)}))};return{request:function(e,r,o){var i=t._createID();return n([i],(function(){return t.requestWithID(e,r,o,i)}))},requestAdvanced:function(e,r){return function(e,r){var o=(Array.isArray(e)?e:[e]).map((function(e){return e.id})).filter(l);return n(o,(function(){return t.requestAdvanced(e,r)}))}(e,r)}}},e.prototype.request=function(e,r,t){return this.requestWithID(e,r,t,this._createID())},e.prototype.requestWithID=function(e,r,t,n){return i(this,void 0,void 0,(function(){var o,i;return u(this,(function(u){switch(u.label){case 0:return o=(0,s.createJSONRPCRequest)(n,e,r),[4,this.requestAdvanced(o,t)];case 1:return void 0===(i=u.sent()).result||i.error?void 0===i.result&&i.error?[2,Promise.reject(new s.JSONRPCErrorException(i.error.message,i.error.code,i.error.data))]:[2,Promise.reject(new Error("An unexpected error occurred"))]:[2,i.result]}}))}))},e.prototype.requestAdvanced=function(e,r){var t=this,n=Array.isArray(e);Array.isArray(e)||(e=[e]);var o=e.filter((function(e){return l(e.id)})),i=o.map((function(e){return new Promise((function(r){return t.idToResolveMap.set(e.id,r)}))})),u=Promise.all(i).then((function(e){return n||!e.length?e:e[0]}));return this.send(n?e:e[0],r).then((function(){return u}),(function(e){return o.forEach((function(r){t.receive((0,s.createJSONRPCErrorResponse)(r.id,a.DefaultErrorCode,e&&e.message||"Failed to send a request"))})),u}))},e.prototype.notify=function(e,r,t){var n=(0,s.createJSONRPCNotification)(e,r);this.send(n,t).then(void 0,(function(){}))},e.prototype.send=function(e,r){return i(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this._send(e,r)]}))}))},e.prototype.rejectAllPendingRequests=function(e){this.idToResolveMap.forEach((function(r,t){return r((0,s.createJSONRPCErrorResponse)(t,a.DefaultErrorCode,e))})),this.idToResolveMap.clear()},e.prototype.receive=function(e){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var t=r.idToResolveMap.get(e.id);t&&(r.idToResolveMap.delete(e.id),t(e))}))},e}();t.JSONRPCClient=c;var l=function(e){return null!=e},d={};Object.defineProperty(d,"__esModule",{value:!0});var f={},p=e&&e.__assign||function(){return p=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},p.apply(this,arguments)},h=e&&e.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(u,s)}a((n=n.apply(e,r||[])).next())}))},v=e&&e.__generator||function(e,r){var t,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(u=0)),u;)try{if(t=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=r.call(e,u)}catch(e){s=[6,e],n=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},R=e&&e.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(f,"__esModule",{value:!0}),f.JSONRPCServer=void 0;var y=n,P=o,S=function(e){return(0,y.createJSONRPCErrorResponse)((0,y.isJSONRPCID)(e.id)?e.id:null,y.JSONRPCErrorCode.InvalidRequest,"Invalid Request")},O=function(){function e(e){var r;void 0===e&&(e={}),this.mapErrorToJSONRPCErrorResponse=b,this.nameToMethodDictionary={},this.middleware=null,this.errorListener=null!==(r=e.errorListener)&&void 0!==r?r:console.warn}return e.prototype.hasMethod=function(e){return!!this.nameToMethodDictionary[e]},e.prototype.addMethod=function(e,r){this.addMethodAdvanced(e,this.toJSONRPCMethod(r))},e.prototype.removeMethod=function(e){delete this.nameToMethodDictionary[e]},e.prototype.toJSONRPCMethod=function(e){return function(r,t){var n=e(r.params,t);return Promise.resolve(n).then((function(e){return J(r.id,e)}))}},e.prototype.addMethodAdvanced=function(e,r){var t;this.nameToMethodDictionary=p(p({},this.nameToMethodDictionary),((t={})[e]=r,t))},e.prototype.receiveJSON=function(e,r){var t=this.tryParseRequestJSON(e);return t?this.receive(t,r):Promise.resolve((0,y.createJSONRPCErrorResponse)(null,y.JSONRPCErrorCode.ParseError,"Parse error"))},e.prototype.tryParseRequestJSON=function(e){try{return JSON.parse(e)}catch(e){return null}},e.prototype.receive=function(e,r){return Array.isArray(e)?this.receiveMultiple(e,r):this.receiveSingle(e,r)},e.prototype.receiveMultiple=function(e,r){return h(this,void 0,void 0,(function(){var t,n=this;return v(this,(function(o){switch(o.label){case 0:return[4,Promise.all(e.map((function(e){return n.receiveSingle(e,r)})))];case 1:return 1===(t=o.sent().filter(C)).length?[2,t[0]]:t.length?[2,t]:[2,null]}}))}))},e.prototype.receiveSingle=function(e,r){return h(this,void 0,void 0,(function(){var t,n;return v(this,(function(o){switch(o.label){case 0:return t=this.nameToMethodDictionary[e.method],(0,y.isJSONRPCRequest)(e)?[3,1]:[2,S(e)];case 1:return[4,this.callMethod(t,e,r)];case 2:return n=o.sent(),[2,m(e,n)]}}))}))},e.prototype.applyMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.middleware?this.middleware=this.combineMiddlewares(R([this.middleware],e,!0)):this.middleware=this.combineMiddlewares(e)},e.prototype.combineMiddlewares=function(e){return e.length?e.reduce(this.middlewareReducer):null},e.prototype.middlewareReducer=function(e,r){return function(t,n,o){return e((function(e,n){return r(t,e,n)}),n,o)}},e.prototype.callMethod=function(e,r,t){var n=this,o=function(e){return n.errorListener('An unexpected error occurred while executing "'.concat(r.method,'" JSON-RPC method:'),e),Promise.resolve(n.mapErrorToJSONRPCErrorResponseIfNecessary(r.id,e))};try{return(this.middleware||N)((function(r,t){return e?e(r,t):void 0!==r.id?Promise.resolve((n=r.id,(0,y.createJSONRPCErrorResponse)(n,y.JSONRPCErrorCode.MethodNotFound,"Method not found"))):Promise.resolve(null);var n}),r,t).then(void 0,o)}catch(e){return o(e)}},e.prototype.mapErrorToJSONRPCErrorResponseIfNecessary=function(e,r){return void 0!==e?this.mapErrorToJSONRPCErrorResponse(e,r):null},e}();f.JSONRPCServer=O;var C=function(e){return null!==e},N=function(e,r,t){return e(r,t)},J=function(e,r){return void 0!==e?(0,y.createJSONRPCSuccessResponse)(e,r):null},b=function(e,r){var t,n,o=null!==(t=null==r?void 0:r.message)&&void 0!==t?t:"An unexpected error occurred",i=P.DefaultErrorCode;return r instanceof y.JSONRPCErrorException&&(i=r.code,n=r.data),(0,y.createJSONRPCErrorResponse)(e,i,o,n)},m=function(e,r){return r||(void 0!==e.id?(0,y.createJSONRPCErrorResponse)(e.id,y.JSONRPCErrorCode.InternalError,"Internal error"):null)},w={},E=e&&e.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(u,s)}a((n=n.apply(e,r||[])).next())}))},M=e&&e.__generator||function(e,r){var t,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(u=0)),u;)try{if(t=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=r.call(e,u)}catch(e){s=[6,e],n=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(w,"__esModule",{value:!0}),w.JSONRPCServerAndClient=void 0;var _,g,A,q=n,j=function(){function e(e,r,t){var n;void 0===t&&(t={}),this.server=e,this.client=r,this.errorListener=null!==(n=t.errorListener)&&void 0!==n?n:console.warn}return e.prototype.applyServerMiddleware=function(){for(var e,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];(e=this.server).applyMiddleware.apply(e,r)},e.prototype.hasMethod=function(e){return this.server.hasMethod(e)},e.prototype.addMethod=function(e,r){this.server.addMethod(e,r)},e.prototype.addMethodAdvanced=function(e,r){this.server.addMethodAdvanced(e,r)},e.prototype.removeMethod=function(e){this.server.removeMethod(e)},e.prototype.timeout=function(e){return this.client.timeout(e)},e.prototype.request=function(e,r,t){return this.client.request(e,r,t)},e.prototype.requestAdvanced=function(e,r){return this.client.requestAdvanced(e,r)},e.prototype.notify=function(e,r,t){this.client.notify(e,r,t)},e.prototype.rejectAllPendingRequests=function(e){this.client.rejectAllPendingRequests(e)},e.prototype.receiveAndSend=function(e,r,t){return E(this,void 0,void 0,(function(){var n,o;return M(this,(function(i){switch(i.label){case 0:return(0,q.isJSONRPCResponse)(e)||(0,q.isJSONRPCResponses)(e)?(this.client.receive(e),[3,4]):[3,1];case 1:return(0,q.isJSONRPCRequest)(e)||(0,q.isJSONRPCRequests)(e)?[4,this.server.receive(e,r)]:[3,3];case 2:return(n=i.sent())?[2,this.client.send(n,t)]:[3,4];case 3:return o="Received an invalid JSON-RPC message",this.errorListener(o,e),[2,Promise.reject(new Error(o))];case 4:return[2]}}))}))},e}();w.JSONRPCServerAndClient=j,_=r,g=e&&e.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),A=e&&e.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||g(r,e,t)},Object.defineProperty(_,"__esModule",{value:!0}),A(t,_),A(d,_),A(n,_),A(f,_),A(w,_);var x=r.JSONRPC,T=r.JSONRPCClient,D=r.JSONRPCErrorCode,I=r.JSONRPCErrorException,k=r.JSONRPCServer,L=r.JSONRPCServerAndClient,F=r.__esModule,G=r.createJSONRPCErrorResponse,W=r.createJSONRPCNotification,B=r.createJSONRPCRequest,z=r.createJSONRPCSuccessResponse,H=r.isJSONRPCID,K=r.isJSONRPCRequest,Q=r.isJSONRPCRequests,U=r.isJSONRPCResponse,V=r.isJSONRPCResponses;export{x as JSONRPC,T as JSONRPCClient,D as JSONRPCErrorCode,I as JSONRPCErrorException,k as JSONRPCServer,L as JSONRPCServerAndClient,F as __esModule,G as createJSONRPCErrorResponse,W as createJSONRPCNotification,B as createJSONRPCRequest,z as createJSONRPCSuccessResponse,r as default,H as isJSONRPCID,K as isJSONRPCRequest,Q as isJSONRPCRequests,U as isJSONRPCResponse,V as isJSONRPCResponses};
//# sourceMappingURL=/sm/106dbc0792526a277a07cb405e8b5487602b6863bac71f81f1085a85dbd01842.map